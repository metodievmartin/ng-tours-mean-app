(self.webpackChunkng_tours_mean_app=self.webpackChunkng_tours_mean_app||[]).push([[675],{2675:(t,n,e)=>{"use strict";e.r(n),e.d(n,{UsersModule:()=>ut});var o=e(8583),r=e(5406),i=e(2922),s=e(7716),a=e(4220);const c=function(){return{exact:!0}},g=function(t){return[t]};let l=(()=>{class t{constructor(){this.svgPath="assets/img/icons.svg#",this.url="",this.svgSuffix="",this.textContent=""}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-side-nav-item"]],inputs:{url:"url",svgSuffix:"svgSuffix",textContent:"textContent"},decls:5,vars:9,consts:[["routerLinkActive","activeLink",1,"side-nav--active",3,"routerLinkActiveOptions"],[3,"routerLink"]],template:function(t,n){1&t&&(s.TgZ(0,"li",0),s.TgZ(1,"a",1),s.O4$(),s.TgZ(2,"svg"),s._UZ(3,"use"),s.qZA(),s._uU(4),s.qZA(),s.qZA()),2&t&&(s.Q6J("routerLinkActiveOptions",s.DdM(4,c)),s.xp6(1),s.Q6J("routerLink",s.VKq(5,g,n.url)),s.xp6(2),s.uIk("href",s.VKq(7,g,n.svgPath+n.svgSuffix),null,"xlink"),s.xp6(1),s.hij(" ",n.textContent," "))},directives:[r.Od,r.yS],styles:["li[_ngcontent-%COMP%]{margin:1rem 0;border-left:0 solid #fff;transition:all .3s}li[_ngcontent-%COMP%]:hover{border-left:5px solid #fff!important}.side-nav--active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{transform:translateX(-3px)}a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited{padding:1rem 4rem;display:flex;align-items:center;color:#fff;font-size:1.5rem;text-transform:uppercase;font-weight:400;text-decoration:none;transition:all .3s}a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:hover{transform:translateX(3px)}svg[_ngcontent-%COMP%]{height:1.9rem;width:1.9rem;fill:#f7f7f7;margin-right:2rem}.activeLink[_ngcontent-%COMP%]{border-left:5px solid #fff}"]}),t})();function p(t,n){1&t&&(s.TgZ(0,"div",6),s.TgZ(1,"h5",7),s._uU(2,"Admin"),s.qZA(),s.TgZ(3,"ul",0),s._UZ(4,"app-side-nav-item",8),s._UZ(5,"app-side-nav-item",9),s._UZ(6,"app-side-nav-item",10),s._UZ(7,"app-side-nav-item",11),s.qZA(),s.qZA())}let d=(()=>{class t{constructor(t){this.store=t,this.user=null}ngOnInit(){this.storeSubscription=this.store.select(t=>t.auth).subscribe(t=>{this.user=t.user})}ngOnDestroy(){this.storeSubscription&&this.storeSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(s.Y36(a.yh))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-side-nav"]],decls:7,vars:1,consts:[[1,"side-nav"],["url","/my-profile","svgSuffix","icon-settings","textContent","Settings"],["url","bookings","svgSuffix","icon-briefcase","textContent","My bookings"],["url","reviews","svgSuffix","icon-star","textContent","My reviews"],["url","billing","svgSuffix","icon-credit-card","textContent","Billing"],["class","admin-nav",4,"ngIf"],[1,"admin-nav"],[1,"admin-nav__heading"],["url","/manage-tours","svgSuffix","icon-map","textContent","Manage tours"],["url","/manage-users","svgSuffix","icon-users","textContent","Manage users"],["url","/manage-reviews","svgSuffix","icon-star","textContent","Manage reviews"],["url","/manage-bookings","svgSuffix","icon-briefcase","textContent","Manage bookings"]],template:function(t,n){1&t&&(s.TgZ(0,"nav"),s.TgZ(1,"ul",0),s._UZ(2,"app-side-nav-item",1),s._UZ(3,"app-side-nav-item",2),s._UZ(4,"app-side-nav-item",3),s._UZ(5,"app-side-nav-item",4),s.qZA(),s.YNc(6,p,8,0,"div",5),s.qZA()),2&t&&(s.xp6(6),s.Q6J("ngIf",n.user&&"admin"===n.user.role))},directives:[l,o.O5],styles:[".side-nav[_ngcontent-%COMP%]{list-style:none}.admin-nav[_ngcontent-%COMP%]{margin-top:5.5rem}.admin-nav__heading[_ngcontent-%COMP%]{margin:0 5rem 1.5rem 4rem;padding-bottom:3px;font-size:1.2rem;text-transform:uppercase;color:#f2f2f2;border-bottom:1px solid}"]}),t})();var u=e(8332);function m(t,n){if(1&t){const t=s.EpF();s.TgZ(0,"app-alert",4),s.NdJ("onClose",function(){return s.CHM(t),s.oxw().closeAlert()})("onInit",function(){return s.CHM(t),s.oxw().onAlertInit()}),s.qZA()}if(2&t){const t=s.oxw();s.Q6J("alertType",t.error?"error":"success")("message",t.notification||t.error)}}let f=(()=>{class t{constructor(t){this.store=t,this.notification=null,this.error=null}ngOnInit(){this.storeSubscription=this.store.select(t=>t.users).subscribe(t=>{this.notification=t.notification,this.error=t.error})}onAlertInit(){this.store.dispatch(i.EJ.notificationDisplayed())}closeAlert(){this.store.dispatch(i.EJ.clearNotification())}ngOnDestroy(){this.storeSubscription&&this.storeSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(s.Y36(a.yh))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-user-profile"]],decls:5,vars:1,consts:[[1,"main"],[1,"user-view"],[3,"alertType","message","onClose","onInit",4,"ngIf"],[1,"user-view__menu"],[3,"alertType","message","onClose","onInit"]],template:function(t,n){1&t&&(s.TgZ(0,"main",0),s.TgZ(1,"div",1),s.YNc(2,m,1,2,"app-alert",2),s._UZ(3,"app-side-nav",3),s._UZ(4,"router-outlet"),s.qZA(),s.qZA()),2&t&&(s.xp6(2),s.Q6J("ngIf",n.notification||n.error))},directives:[o.O5,d,r.lC,u.w],styles:[".main[_ngcontent-%COMP%]{background-color:#f7f7f7;padding:4rem;flex:1;position:relative}.user-view[_ngcontent-%COMP%]{background-color:#fff;max-width:120rem;margin:0 auto;min-height:100vh;border-radius:3px;overflow:hidden;box-shadow:0 2.5rem 8rem 2rem #00000012;display:flex}.user-view__menu[_ngcontent-%COMP%]{flex:33rem 0 0;background-image:linear-gradient(to right bottom,#7dd56f,#28b487);padding:4rem 0}"]}),t})();var b=e(665),_=e(2340),h=e(2925);function x(t,n){1&t&&(s.ynx(0),s._UZ(1,"div",29),s._UZ(2,"app-spinner",30),s.BQk())}const v=function(t){return{error:t}};function Z(t,n){if(1&t&&(s.TgZ(0,"span",31),s._uU(1),s.qZA()),2&t){const t=s.oxw();s.Q6J("ngClass",s.VKq(2,v,null!==t.fileUploadError)),s.xp6(1),s.Oqu(t.fileUploadError?t.fileUploadError:t.imageName+" \u2705")}}function w(t,n){1&t&&(s.TgZ(0,"p",32),s._uU(1," Password must be at least 8 characters long "),s.qZA())}function C(t,n){1&t&&(s.TgZ(0,"p",32),s._uU(1," Passwords don't match "),s.qZA())}const O=function(t){return[t]},P=function(t){return{"pass-not-match":t}};let M=(()=>{class t{constructor(t){this.store=t,this.userImagesUrl=_.N.restApiHost+_.N.userImg,this.user=null,this.loading=!1,this.infoUpdateForm=new b.cw({name:new b.NI("",[b.kI.required,b.kI.minLength(2)]),email:new b.NI("",[b.kI.required,b.kI.email]),photo:new b.NI(null)}),this.passwordUpdateForm=new b.cw({currentPassword:new b.NI("",[b.kI.required,b.kI.minLength(8)]),newPassword:new b.NI("",[b.kI.required,b.kI.minLength(8)]),passwordConfirm:new b.NI("",[b.kI.required,b.kI.minLength(8)])}),this.uploadedStarted=!1,this.uploaded=!1,this.imageName="",this.fileUploadError=null}ngOnInit(){var t,n;this.storeSubscription=this.store.select(t=>t).subscribe(t=>{this.user=t.auth.user,this.loading=t.users.loading}),this.infoUpdateForm.setValue({name:null===(t=this.user)||void 0===t?void 0:t.name,email:null===(n=this.user)||void 0===n?void 0:n.email,photo:null})}onUserInfoUpdate(){if(!this.infoUpdateForm.valid||this.fileUploadError)return;const{name:t,email:n,photo:e}=this.infoUpdateForm.value;this.store.dispatch(i.EJ.updateCurrentUserInfo({name:t,email:n,photo:e})),this.uploadedStarted=!1,this.uploaded=!1,this.imageName="",this.fileUploadError=null}onImageChange(t){this.uploadedStarted=!0;const n=new FileReader;if(t.target.files&&t.target.files.length){const[e]=t.target.files;n.readAsDataURL(e),n.onload=()=>{this.infoUpdateForm.patchValue({photo:e}),this.uploaded=!0,"image/png"===e.type||"image/jpeg"===e.type?(this.fileUploadError=null,this.imageName=e.name):this.fileUploadError="Only files of type image are allowed - .jpg .png"}}}onPasswordUpdate(){if(this.passwordUpdateForm.invalid)return;if(this.passwordUpdateForm.controls.newPassword!==this.passwordUpdateForm.controls.passwordConfirm)return;const{currentPassword:t,newPassword:n,passwordConfirm:e}=this.passwordUpdateForm.value;console.log(this.passwordUpdateForm.value),this.store.dispatch(i.EJ.updateCurrentUserPassword({currentPassword:t,newPassword:n,passwordConfirm:e}))}ngOnDestroy(){this.storeSubscription&&this.storeSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(s.Y36(a.yh))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-user-settings"]],decls:46,vars:14,consts:[[1,"user-view__content"],[4,"ngIf"],[1,"user-view__form-container"],[1,"heading-secondary","ma-bt-md"],[1,"form","form-user-data",3,"formGroup","ngSubmit"],[1,"form__group"],["for","name",1,"form__label"],["id","name","type","text","formControlName","name",1,"form__input"],[1,"form__group","ma-bt-md"],["for","email",1,"form__label"],["id","email","type","email","formControlName","email",1,"form__input"],[1,"form__group","form__photo-upload"],["alt","User photo",1,"form__user-photo",3,"src"],[1,"btn-text","upload-container"],["type","file","name","photo",1,"file-input",3,"change"],["class","upload-notification",3,"ngClass",4,"ngIf"],[1,"form__group","right"],[1,"btn","btn--small","btn--green",3,"disabled"],[1,"line"],[1,"form","form-user-settings",3,"formGroup","ngSubmit"],["for","password-current",1,"form__label"],["id","password-current","type","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","formControlName","currentPassword",1,"form__input"],["for","password",1,"form__label"],["id","password","type","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","formControlName","newPassword",1,"form__input"],["class","error-notification",4,"ngIf"],[1,"form__group","ma-bt-lg"],["for","password-confirm",1,"form__label"],["id","password-confirm","type","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","formControlName","passwordConfirm",1,"form__input",3,"ngClass"],["type","submit",1,"btn","btn--small","btn--green",3,"disabled"],[1,"overlay"],[1,"spinner"],[1,"upload-notification",3,"ngClass"],[1,"error-notification"]],template:function(t,n){1&t&&(s.TgZ(0,"div",0),s.YNc(1,x,3,0,"ng-container",1),s.TgZ(2,"div",2),s.TgZ(3,"h2",3),s._uU(4,"Your account settings"),s.qZA(),s.TgZ(5,"form",4),s.NdJ("ngSubmit",function(){return n.onUserInfoUpdate()}),s.TgZ(6,"div",5),s.TgZ(7,"label",6),s._uU(8,"Name"),s.qZA(),s._UZ(9,"input",7),s.qZA(),s.TgZ(10,"div",8),s.TgZ(11,"label",9),s._uU(12,"Email address"),s.qZA(),s._UZ(13,"input",10),s.qZA(),s.TgZ(14,"div",11),s._UZ(15,"img",12),s.TgZ(16,"label",13),s.TgZ(17,"input",14),s.NdJ("change",function(t){return n.onImageChange(t)}),s.qZA(),s._uU(18," Choose new photo "),s.qZA(),s.YNc(19,Z,2,4,"span",15),s.qZA(),s.TgZ(20,"div",16),s.TgZ(21,"button",17),s._uU(22," Save settings "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(23,"div",18),s._uU(24,"\xa0"),s.qZA(),s.TgZ(25,"div",2),s.TgZ(26,"h2",3),s._uU(27,"Password change"),s.qZA(),s.TgZ(28,"form",19),s.NdJ("ngSubmit",function(){return n.onPasswordUpdate()}),s.TgZ(29,"div",5),s.TgZ(30,"label",20),s._uU(31,"Current password"),s.qZA(),s._UZ(32,"input",21),s.qZA(),s.TgZ(33,"div",5),s.TgZ(34,"label",22),s._uU(35,"New password"),s.qZA(),s._UZ(36,"input",23),s.YNc(37,w,2,0,"p",24),s.qZA(),s.TgZ(38,"div",25),s.TgZ(39,"label",26),s._uU(40,"Confirm password"),s.qZA(),s._UZ(41,"input",27),s.YNc(42,C,2,0,"p",24),s.qZA(),s.TgZ(43,"div",16),s.TgZ(44,"button",28),s._uU(45," Save password "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(1),s.Q6J("ngIf",n.loading),s.xp6(4),s.Q6J("formGroup",n.infoUpdateForm),s.xp6(10),s.Q6J("src",s.VKq(10,O,n.userImagesUrl+(null==n.user?null:n.user.photo)||"default.jpg"),s.LSH),s.xp6(4),s.Q6J("ngIf",n.uploadedStarted),s.xp6(2),s.Q6J("disabled",!n.infoUpdateForm.valid),s.xp6(7),s.Q6J("formGroup",n.passwordUpdateForm),s.xp6(9),s.Q6J("ngIf",(null==n.passwordUpdateForm.controls.newPassword.errors?null:n.passwordUpdateForm.controls.newPassword.errors.minlength)&&n.passwordUpdateForm.controls.newPassword.touched),s.xp6(4),s.Q6J("ngClass",s.VKq(12,P,n.passwordUpdateForm.controls.newPassword.value!==n.passwordUpdateForm.controls.passwordConfirm.value&&n.passwordUpdateForm.controls.passwordConfirm.touched)),s.xp6(1),s.Q6J("ngIf",n.passwordUpdateForm.controls.newPassword.value!==n.passwordUpdateForm.controls.passwordConfirm.value&&n.passwordUpdateForm.controls.passwordConfirm.touched),s.xp6(2),s.Q6J("disabled",!n.passwordUpdateForm.valid))},directives:[o.O5,b._Y,b.JL,b.sg,b.Fj,b.JJ,b.u,o.mk,h.O],styles:["[_nghost-%COMP%]{flex:1}.user-view__form-container[_ngcontent-%COMP%]{max-width:68rem;margin:0 auto;padding:0 6rem}.heading-secondary[_ngcontent-%COMP%]{font-size:2.25rem;text-transform:uppercase;font-weight:700;background-image:linear-gradient(90deg,#7dd56f,#28b487);-webkit-background-clip:text;color:#0000;letter-spacing:.2rem;line-height:1.3;display:inline-block}.ma-bt-md[_ngcontent-%COMP%]{margin-bottom:3rem!important}.form__group[_ngcontent-%COMP%]:not(:last-child){margin-bottom:2.5rem}.form__label[_ngcontent-%COMP%]{display:block;font-size:1.6rem;font-weight:700;margin-bottom:.75rem}.form__input[_ngcontent-%COMP%]{display:block;font-family:inherit;font-size:1.5rem;color:inherit;padding:1.25rem 1.75rem;width:100%;background-color:#fff;background-color:#f2f2f2;border:3px solid #0000;border-right:none;border-left:none;transition:all .3s;border-radius:4px;box-sizing:border-box}input[_ngcontent-%COMP%]:focus{outline:none}input.ng-dirty.ng-valid[_ngcontent-%COMP%]:not(.pass-not-match):focus{border-bottom:3px solid #55c57a}input.ng-dirty.ng-invalid[_ngcontent-%COMP%], input.pass-not-match[_ngcontent-%COMP%]{border-bottom:3px solid #ff5c09}.form__input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#bbb}.form__photo-upload[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.6rem}.form__user-photo[_ngcontent-%COMP%]{height:7.5rem;width:7.5rem;border-radius:50%;margin-right:2rem}.form__upload[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%]{outline:3px solid #55c57a;outline-offset:3px}.form__upload[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{color:#55c57a;display:inline-block;text-decoration:none;border-bottom:1px solid #55c57a;padding:3px;transition:all .2s;cursor:pointer}.form__upload[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:hover{background-color:#55c57a;color:#fff;box-shadow:0 1rem 2rem #00000026;transform:translateY(-2px)}.right[_ngcontent-%COMP%]{text-align:right!important}.btn--green[_ngcontent-%COMP%]{color:#fff}.btn--green[_ngcontent-%COMP%], .btn--green[_ngcontent-%COMP%]:after{background-color:#55c57a}.btn-text[_ngcontent-%COMP%]:link, .btn-text[_ngcontent-%COMP%]:visited{color:#55c57a;display:inline-block;text-decoration:none;border-bottom:1px solid #55c57a;padding:3px;transition:all .2s}.btn-text[_ngcontent-%COMP%]:hover{background-color:#55c57a;color:#fff;box-shadow:0 1rem 2rem #00000026;transform:translateY(-2px)}.btn-text[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 .5rem 1rem #00000026}.btn-text[_ngcontent-%COMP%]:focus{outline:none;outline:3px solid #55c57a;outline-offset:3px}.btn[_ngcontent-%COMP%]:disabled{background:#999;cursor:default}.btn[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:link, .btn[_ngcontent-%COMP%]:visited{font-size:1.6rem;padding:1.4rem 3rem;border-radius:10rem;text-transform:uppercase;display:inline-block;text-decoration:none;position:relative;transition:all .4s;font-weight:400;-webkit-backface-visibility:hidden;backface-visibility:hidden;border:none;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 1rem 2rem #00000026}.btn[_ngcontent-%COMP%]:active{transform:translateY(-1px);box-shadow:0 .5rem 1rem #00000026}.btn[_ngcontent-%COMP%]:focus{outline:none;background-color:#2e864b}.line[_ngcontent-%COMP%]{margin:6rem 0;width:100%;height:1px;background-color:#e0e0e0}.ma-bt-lg[_ngcontent-%COMP%]{margin-bottom:3.5rem!important}.user-view__content[_ngcontent-%COMP%]{position:relative;flex:1;padding:7rem 0}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;background:#3b3a3a61;z-index:50;width:100%;height:100%}.spinner[_ngcontent-%COMP%]{position:fixed;top:40%;left:60%;z-index:99}input[type=file][_ngcontent-%COMP%]{position:absolute;opacity:0;text-align:right;z-index:2;width:1px}label.upload-container[_ngcontent-%COMP%]{position:relative;color:#55c57a;border-bottom:1px solid #55c57a;padding:1rem}label.upload-container[_ngcontent-%COMP%]:hover{cursor:pointer}.error-notification[_ngcontent-%COMP%]{padding:.5rem;color:#ff5c09}span.upload-notification[_ngcontent-%COMP%]{font-size:1.1rem;margin-left:2rem}span.error[_ngcontent-%COMP%]{color:#ff5c09}"]}),t})();var k=e(306);const U=function(t){return[t]};let A=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-booking-item"]],inputs:{booking:"booking",tourImagesUrl:"tourImagesUrl"},decls:24,vars:10,consts:[[1,"container"],[1,"image"],["alt","tour-cover",3,"src"],[1,"details"],[1,"date"],[1,"card__icon"],[0,"xlink","href","assets/img/icons.svg#icon-calendar"],[1,"location"],[0,"xlink","href","assets/img/icons.svg#icon-flag"],[1,"name"],[1,"price"],[1,"btn-container"],[1,"btn","btn--small","btn--green",3,"routerLink"]],template:function(t,n){1&t&&(s.TgZ(0,"section",0),s.TgZ(1,"article",1),s._UZ(2,"img",2),s.qZA(),s.TgZ(3,"article",3),s.TgZ(4,"div",4),s.O4$(),s.TgZ(5,"svg",5),s._UZ(6,"use",6),s.qZA(),s.kcU(),s.TgZ(7,"span"),s._uU(8),s.ALo(9,"date"),s.qZA(),s.qZA(),s.TgZ(10,"div",7),s.O4$(),s.TgZ(11,"svg",5),s._UZ(12,"use",8),s.qZA(),s.kcU(),s.TgZ(13,"span"),s._uU(14),s.qZA(),s.qZA(),s.qZA(),s.TgZ(15,"article",9),s.TgZ(16,"h3"),s._uU(17),s.qZA(),s.qZA(),s.TgZ(18,"article",10),s.TgZ(19,"p"),s._uU(20),s.qZA(),s.qZA(),s.TgZ(21,"article",11),s.TgZ(22,"a",12),s._uU(23,"Details"),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(2),s.Q6J("src",s.VKq(8,U,n.tourImagesUrl+n.booking.tour.imageCover),s.LSH),s.xp6(6),s.Oqu(s.lcZ(9,6,n.booking.tour.startDates[0])),s.xp6(6),s.Oqu(n.booking.tour.startLocation.description),s.xp6(3),s.Oqu(n.booking.tour.name),s.xp6(3),s.hij("$",n.booking.tour.price,""),s.xp6(2),s.Q6J("routerLink",n.booking._id))},directives:[r.yS],pipes:[o.uU],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-items:center;margin-top:15px;margin-bottom:15px;padding-top:5px;padding-bottom:5px;border-bottom:1px solid #c9c9c9}.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:70px;max-width:110px;border-radius:12px}.card__icon[_ngcontent-%COMP%]{height:2rem;width:2rem;fill:#55c57a}.date[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .location[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:5px}.date[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .location[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.3rem}.date[_ngcontent-%COMP%], .location[_ngcontent-%COMP%]{font-size:1.2rem;display:flex;align-items:center;margin-top:10px;margin-bottom:10px}.name[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .price[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.7rem}.name[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{max-width:25rem}.btn--green[_ngcontent-%COMP%]{color:#fff}.btn--green[_ngcontent-%COMP%], .btn--green[_ngcontent-%COMP%]:after{background-color:#55c57a}.btn-text[_ngcontent-%COMP%]:link, .btn-text[_ngcontent-%COMP%]:visited{color:#55c57a;display:inline-block;text-decoration:none;border-bottom:1px solid #55c57a;padding:3px;transition:all .2s}.btn-text[_ngcontent-%COMP%]:hover{background-color:#55c57a;color:#fff;box-shadow:0 1rem 2rem #00000026;transform:translateY(-2px)}.btn-text[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 .5rem 1rem #00000026}.btn-text[_ngcontent-%COMP%]:focus{outline:none;outline:3px solid #55c57a;outline-offset:3px}.btn[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:link, .btn[_ngcontent-%COMP%]:visited{font-size:1.6rem;padding:1rem 3rem;border-radius:10rem;text-transform:uppercase;display:inline-block;text-decoration:none;position:relative;transition:all .4s;font-weight:400;-webkit-backface-visibility:hidden;backface-visibility:hidden;border:none;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 1rem 2rem #00000026}.btn[_ngcontent-%COMP%]:active{transform:translateY(-1px);box-shadow:0 .5rem 1rem #00000026}.btn[_ngcontent-%COMP%]:focus{outline:none;background-color:#2e864b}"]}),t})();function q(t,n){1&t&&s._UZ(0,"app-spinner",5)}function y(t,n){if(1&t&&(s.ynx(0),s.YNc(1,q,1,0,"app-spinner",4),s.BQk()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("ngIf",t.loading)}}function T(t,n){if(1&t&&s._UZ(0,"app-booking-item",7),2&t){const t=n.$implicit,e=s.oxw(2);s.Q6J("booking",t)("tourImagesUrl",e.tourImagesUrl)}}function I(t,n){if(1&t&&(s.ynx(0),s.YNc(1,T,1,2,"app-booking-item",6),s.BQk()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("ngForOf",t.bookings)}}function N(t,n){1&t&&(s.ynx(0),s.TgZ(1,"p",8),s._uU(2,"You have no bookings yet..."),s.qZA(),s.BQk())}let S=(()=>{class t{constructor(t){this.store=t,this.tourImagesUrl=_.N.restApiHost+_.N.tourImg,this.bookings=[],this.loading=!1}ngOnInit(){this.storeSubscription=this.store.select(t=>t.users).subscribe(t=>{this.bookings=t.bookings,this.loading=t.loading}),this.store.dispatch(i.mq.fetchUserBookings())}ngOnDestroy(){this.storeSubscription&&this.storeSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(s.Y36(a.yh))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-user-bookings"]],decls:7,vars:3,consts:[[1,"user-view__content"],[1,"user-view__form-container"],[1,"heading-secondary","ma-bt-md"],[4,"ngIf"],["class","spinner",4,"ngIf"],[1,"spinner"],[3,"booking","tourImagesUrl",4,"ngFor","ngForOf"],[3,"booking","tourImagesUrl"],[1,"no-bookings"]],template:function(t,n){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"h2",2),s._uU(3,"My bookings"),s.qZA(),s.YNc(4,y,2,1,"ng-container",3),s.YNc(5,I,2,1,"ng-container",3),s.YNc(6,N,3,0,"ng-container",3),s.qZA(),s.qZA()),2&t&&(s.xp6(4),s.Q6J("ngIf",n.loading),s.xp6(1),s.Q6J("ngIf",!n.loading),s.xp6(1),s.Q6J("ngIf",!n.loading&&0===n.bookings.length))},directives:[o.O5,h.O,o.sg,A],styles:["[_nghost-%COMP%]{flex:1}.spinner[_ngcontent-%COMP%]{top:85px;z-index:99}.overlay[_ngcontent-%COMP%], .spinner[_ngcontent-%COMP%]{position:absolute;width:100%;left:0}.overlay[_ngcontent-%COMP%]{top:0;height:100%;background:#5252521a;z-index:50}.user-view__form-container[_ngcontent-%COMP%]{position:relative;max-width:68rem;margin:0 auto;padding:0}.heading-secondary[_ngcontent-%COMP%]{font-size:2.25rem;text-transform:uppercase;font-weight:700;background-image:linear-gradient(90deg,#7dd56f,#28b487);-webkit-background-clip:text;color:#0000;letter-spacing:.2rem;line-height:1.3;display:inline-block}.ma-bt-md[_ngcontent-%COMP%]{margin-bottom:3rem!important}.form__group[_ngcontent-%COMP%]:not(:last-child){margin-bottom:2.5rem}.form__label[_ngcontent-%COMP%]{display:block;font-size:1.6rem;font-weight:700;margin-bottom:.75rem}.form__input[_ngcontent-%COMP%]{display:block;font-family:inherit;font-size:1.5rem;color:inherit;padding:1.25rem 1.75rem;width:100%;background-color:#fff;background-color:#f2f2f2;border:3px solid #0000;border-right:none;border-left:none;transition:all .3s;border-radius:4px;box-sizing:border-box}.form__input[_ngcontent-%COMP%]:focus{outline:none;border-bottom:3px solid #55c57a}.form__input[_ngcontent-%COMP%]:focus:invalid{border-bottom:3px solid #ff7730}.form__input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#bbb}.form__photo-upload[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.6rem}.form__user-photo[_ngcontent-%COMP%]{height:7.5rem;width:7.5rem;border-radius:50%;margin-right:2rem}.form__upload[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%]{outline:3px solid #55c57a;outline-offset:3px}.form__upload[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{color:#55c57a;display:inline-block;text-decoration:none;border-bottom:1px solid #55c57a;padding:3px;transition:all .2s;cursor:pointer}.form__upload[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:hover{background-color:#55c57a;color:#fff;box-shadow:0 1rem 2rem #00000026;transform:translateY(-2px)}.right[_ngcontent-%COMP%]{text-align:right!important}.btn--green[_ngcontent-%COMP%]{color:#fff}.btn--green[_ngcontent-%COMP%], .btn--green[_ngcontent-%COMP%]:after{background-color:#55c57a}.btn-text[_ngcontent-%COMP%]:link, .btn-text[_ngcontent-%COMP%]:visited{color:#55c57a;display:inline-block;text-decoration:none;border-bottom:1px solid #55c57a;padding:3px;transition:all .2s}.btn-text[_ngcontent-%COMP%]:hover{background-color:#55c57a;color:#fff;box-shadow:0 1rem 2rem #00000026;transform:translateY(-2px)}.btn-text[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 .5rem 1rem #00000026}.btn-text[_ngcontent-%COMP%]:focus{outline:none;outline:3px solid #55c57a;outline-offset:3px}.btn[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:link, .btn[_ngcontent-%COMP%]:visited{font-size:1.6rem;padding:1.4rem 3rem;border-radius:10rem;text-transform:uppercase;display:inline-block;text-decoration:none;position:relative;transition:all .4s;font-weight:400;-webkit-backface-visibility:hidden;backface-visibility:hidden;border:none;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 1rem 2rem #00000026}.btn[_ngcontent-%COMP%]:active{transform:translateY(-1px);box-shadow:0 .5rem 1rem #00000026}.btn[_ngcontent-%COMP%]:focus{outline:none;background-color:#2e864b}.line[_ngcontent-%COMP%]{margin:6rem 0;width:100%;height:1px;background-color:#e0e0e0}.ma-bt-lg[_ngcontent-%COMP%]{margin-bottom:3.5rem!important}.user-view__content[_ngcontent-%COMP%]{position:relative;flex:1;padding:7rem 0}p.no-bookings[_ngcontent-%COMP%]{font-size:2rem}"]}),t})();function Y(t,n){1&t&&s._UZ(0,"app-spinner",7)}function J(t,n){if(1&t&&(s.ynx(0),s.YNc(1,Y,1,0,"app-spinner",6),s.BQk()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("ngIf",t.loading)}}function F(t,n){if(1&t&&(s.TgZ(0,"p"),s._uU(1," | "),s.TgZ(2,"strong"),s._uU(3),s.qZA(),s._uU(4),s.qZA()),2&t){const t=n.$implicit;s.xp6(3),s.hij("Day ",t.day,":"),s.xp6(1),s.hij(" ",t.description," ")}}const Q=function(t){return[t]};function z(t,n){if(1&t&&(s.TgZ(0,"div",21),s._UZ(1,"img",22),s.TgZ(2,"span",23),s._uU(3),s.qZA(),s.TgZ(4,"span",24),s._uU(5),s.qZA(),s.qZA()),2&t){const t=n.$implicit,e=s.oxw(3);s.xp6(1),s.Q6J("src",s.VKq(3,Q,e.userImagesUrl+t.photo),s.LSH),s.xp6(2),s.Oqu(t.role),s.xp6(2),s.Oqu(t.name)}}function B(t,n){if(1&t&&(s.TgZ(0,"div",25),s.O4$(),s.TgZ(1,"svg",26),s._UZ(2,"use",27),s.qZA(),s.kcU(),s.TgZ(3,"p",28),s._uU(4),s.ALo(5,"date"),s.qZA(),s.qZA()),2&t){const t=n.$implicit;s.xp6(4),s.hij(" ",s.xi3(5,1,t,"fullDate")," ")}}function L(t,n){1&t&&(s.TgZ(0,"p"),s._uU(1," Currently there are no dates available... "),s.qZA())}const D=function(t){return["/tours",t]};function R(t,n){if(1&t&&(s.TgZ(0,"section",11),s.TgZ(1,"h4",3),s._uU(2,"Tour summary"),s.qZA(),s.TgZ(3,"article",12),s._UZ(4,"img",13),s.qZA(),s.TgZ(5,"article",10),s.TgZ(6,"p"),s.TgZ(7,"strong"),s._uU(8,"Name:"),s.qZA(),s.qZA(),s.TgZ(9,"p"),s._uU(10),s.qZA(),s.qZA(),s.TgZ(11,"article",10),s.TgZ(12,"p"),s.TgZ(13,"strong"),s._uU(14,"Start Location:"),s.qZA(),s.qZA(),s.TgZ(15,"span"),s._uU(16),s.qZA(),s.qZA(),s.TgZ(17,"article",10),s.TgZ(18,"p"),s.TgZ(19,"strong"),s._uU(20,"Schedule:"),s.qZA(),s.qZA(),s.YNc(21,F,5,2,"p",14),s.qZA(),s.TgZ(22,"section",15),s.TgZ(23,"article"),s.TgZ(24,"p",16),s.TgZ(25,"strong"),s._uU(26,"Tour guides:"),s.qZA(),s.qZA(),s.YNc(27,z,6,5,"div",17),s.qZA(),s.TgZ(28,"article"),s.TgZ(29,"p",16),s.TgZ(30,"strong"),s._uU(31,"Available dates: "),s.qZA(),s.qZA(),s.YNc(32,B,6,4,"div",18),s.YNc(33,L,2,0,"p",5),s.qZA(),s.qZA(),s.TgZ(34,"article",19),s.TgZ(35,"a",20),s._uU(36,"Tour Details"),s.qZA(),s.qZA(),s.qZA()),2&t){const t=s.oxw(2);s.xp6(4),s.Q6J("src",s.VKq(8,Q,t.tourImagesUrl+t.booking.tour.imageCover),s.LSH),s.xp6(6),s.hij("",t.booking.tour.name," Tour"),s.xp6(6),s.Oqu(t.booking.tour.startLocation.address),s.xp6(5),s.Q6J("ngForOf",t.booking.tour.locations),s.xp6(6),s.Q6J("ngForOf",t.booking.tour.guides),s.xp6(5),s.Q6J("ngForOf",t.booking.tour.startDates),s.xp6(1),s.Q6J("ngIf",!t.booking.tour.startDates||0===t.booking.tour.startDates.length),s.xp6(2),s.Q6J("routerLink",s.VKq(10,D,t.booking.tour.slug))}}function E(t,n){if(1&t&&(s.ynx(0),s.YNc(1,R,37,12,"section",8),s.TgZ(2,"div",9),s._uU(3,"\xa0"),s.qZA(),s.TgZ(4,"section"),s.TgZ(5,"h4",3),s._uU(6,"Booking summary"),s.qZA(),s.TgZ(7,"article",10),s.TgZ(8,"p"),s.TgZ(9,"strong"),s._uU(10,"Status: "),s.qZA(),s._uU(11),s.ALo(12,"uppercase"),s.qZA(),s.qZA(),s.TgZ(13,"article",10),s.TgZ(14,"p"),s.TgZ(15,"strong"),s._uU(16,"Payment: "),s.qZA(),s._uU(17),s.ALo(18,"date"),s.qZA(),s.qZA(),s.TgZ(19,"article",10),s.TgZ(20,"p"),s.TgZ(21,"strong"),s._uU(22,"Order: "),s.qZA(),s._uU(23),s.qZA(),s.qZA(),s.TgZ(24,"article",10),s.TgZ(25,"p"),s.TgZ(26,"strong"),s._uU(27,"Price: "),s.qZA(),s._uU(28),s.ALo(29,"currency"),s.qZA(),s.qZA(),s.TgZ(30,"article",10),s.TgZ(31,"p"),s.TgZ(32,"strong"),s._uU(33,"Name: "),s.qZA(),s._uU(34),s.ALo(35,"uppercase"),s.qZA(),s.qZA(),s.TgZ(36,"article",10),s.TgZ(37,"p"),s.TgZ(38,"strong"),s._uU(39,"Email: "),s.qZA(),s._uU(40),s.qZA(),s.qZA(),s.qZA(),s.BQk()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("ngIf",t.booking.tour),s.xp6(10),s.Oqu(s.lcZ(12,7,t.booking.status)),s.xp6(6),s.hij(" ",t.booking.paid?s.xi3(18,9,t.booking.finishedAt,"full"):"N/A",""),s.xp6(6),s.hij(" ",t.booking.paid?"CONFIRMED":"N/A",""),s.xp6(5),s.Oqu(s.xi3(29,12,t.booking.price,"USD")),s.xp6(6),s.Oqu(s.lcZ(35,15,t.booking.user.name)),s.xp6(6),s.Oqu(t.booking.user.email)}}let $=(()=>{class t{constructor(t,n){this.store=t,this.route=n,this.tourImagesUrl=_.N.restApiHost+_.N.tourImg,this.userImagesUrl=_.N.restApiHost+_.N.userImg,this.booking=null,this.loading=!1,this.error=null}ngOnInit(){this.store.select(t=>t.users).subscribe(t=>{this.booking=t.bookingDetails,this.loading=t.loading,this.error=t.error});const t=this.route.snapshot.paramMap.get("id")||"-1";this.store.dispatch(i.mq.fetchBookingDetails({bookingId:t}))}ngOnDestroy(){this.storeSubscription&&this.storeSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(s.Y36(a.yh),s.Y36(r.gz))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-booking-details"]],decls:9,vars:2,consts:[[1,"page-container"],[1,"page-view"],[1,"header"],[1,"heading-secondary","ma-bt-md"],["id","go-back","routerLink","/my-profile/bookings",1,"heading-secondary"],[4,"ngIf"],["class","spinner",4,"ngIf"],[1,"spinner"],["class","tour-summary",4,"ngIf"],[1,"line"],[1,"summary-detail"],[1,"tour-summary"],[1,"tour-cover-container"],["alt","tour-cover-photo",3,"src"],[4,"ngFor","ngForOf"],[1,"guides-dates"],[1,"sub-heading"],["class","overview-box__detail",4,"ngFor","ngForOf"],["class","dates-container",4,"ngFor","ngForOf"],[1,"btn-container"],[1,"btn","btn--small","btn--green",3,"routerLink"],[1,"overview-box__detail"],["alt","tour-guide-photo",1,"overview-box__img",3,"src"],[1,"overview-box__label"],[1,"overview-box__text"],[1,"dates-container"],[1,"overview-box__icon"],[0,"xlink","href","assets/img/icons.svg#icon-calendar"],[1,"date"]],template:function(t,n){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"section",1),s.TgZ(2,"article",2),s.TgZ(3,"h2",3),s._uU(4,"Booking Details"),s.qZA(),s.TgZ(5,"a",4),s._uU(6,"\u2039 Go back"),s.qZA(),s.qZA(),s.YNc(7,J,2,1,"ng-container",5),s.YNc(8,E,41,17,"ng-container",5),s.qZA(),s.qZA()),2&t&&(s.xp6(7),s.Q6J("ngIf",n.loading),s.xp6(1),s.Q6J("ngIf",n.booking&&!n.loading))},directives:[r.yS,o.O5,h.O,o.sg],pipes:[o.gd,o.uU,o.H9],styles:["[_nghost-%COMP%]{flex:1}.spinner[_ngcontent-%COMP%]{top:85px;z-index:99}.overlay[_ngcontent-%COMP%], .spinner[_ngcontent-%COMP%]{position:absolute;width:100%;left:0}.overlay[_ngcontent-%COMP%]{top:0;height:100%;background:#5252521a;z-index:50}.page-view[_ngcontent-%COMP%]{position:relative;max-width:68rem;margin:0 auto;padding:0}.header[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-items:flex-start;justify-content:space-between;margin-bottom:1rem}a.heading-secondary[_ngcontent-%COMP%]{padding:0 1rem}a.heading-secondary[_ngcontent-%COMP%]:hover{border-bottom:1px solid #28b487;transform:translateY(-2px)}.heading-secondary[_ngcontent-%COMP%]{font-size:2.25rem;text-transform:uppercase;font-weight:700;background-image:linear-gradient(90deg,#7dd56f,#28b487);-webkit-background-clip:text;color:#0000;letter-spacing:.2rem;line-height:1.3;display:inline-block}.ma-bt-md[_ngcontent-%COMP%]{margin-bottom:3rem!important}.btn--green[_ngcontent-%COMP%]{color:#fff}.btn--green[_ngcontent-%COMP%], .btn--green[_ngcontent-%COMP%]:after{background-color:#55c57a}.btn-text[_ngcontent-%COMP%]:link, .btn-text[_ngcontent-%COMP%]:visited{color:#55c57a;display:inline-block;text-decoration:none;border-bottom:1px solid #55c57a;padding:3px;transition:all .2s}.btn-text[_ngcontent-%COMP%]:hover{background-color:#55c57a;color:#fff;box-shadow:0 1rem 2rem #00000026;transform:translateY(-2px)}.btn-text[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 .5rem 1rem #00000026}.btn-text[_ngcontent-%COMP%]:focus{outline:none;outline:3px solid #55c57a;outline-offset:3px}.btn[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:link, .btn[_ngcontent-%COMP%]:visited{font-size:1.6rem;padding:1.4rem 3rem;border-radius:10rem;text-transform:uppercase;display:inline-block;text-decoration:none;position:relative;transition:all .4s;font-weight:400;-webkit-backface-visibility:hidden;backface-visibility:hidden;border:none;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 1rem 2rem #00000026}.btn[_ngcontent-%COMP%]:active{transform:translateY(-1px);box-shadow:0 .5rem 1rem #00000026}.btn[_ngcontent-%COMP%]:focus{outline:none;background-color:#2e864b}.line[_ngcontent-%COMP%]{margin:6rem 0;width:100%;height:1px;background-color:#e0e0e0}.ma-bt-lg[_ngcontent-%COMP%]{margin-bottom:3.5rem!important}.page-container[_ngcontent-%COMP%]{position:relative;flex:1;padding:7rem 0}.overview-box[_ngcontent-%COMP%]{background-color:#f7f7f7;display:flex;justify-content:center}.overview-box__group[_ngcontent-%COMP%]:not(:last-child){margin-bottom:7rem}.overview-box__detail[_ngcontent-%COMP%]{font-size:1.5rem;display:flex;align-items:center;font-weight:400}.overview-box__detail[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:1.25rem}.overview-box__detail[_ngcontent-%COMP%]:not(:last-child){margin-bottom:2.25rem}.overview-box__icon[_ngcontent-%COMP%]{height:2.25rem;width:2.25rem;fill:#55c57a}.overview-box__label[_ngcontent-%COMP%]{font-weight:700;margin-right:2.25rem;text-transform:uppercase;font-size:1.5rem}.overview-box__text[_ngcontent-%COMP%]{text-transform:capitalize}.overview-box__img[_ngcontent-%COMP%]{border-radius:50%;height:3.5rem;margin-right:1.25rem}section.guides-dates[_ngcontent-%COMP%]{font-size:2rem;display:flex;flex-flow:row wrap;justify-content:space-between}section.guides-dates[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:2rem}.tour-cover-container[_ngcontent-%COMP%]{margin-bottom:2rem}.tour-cover-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:3px;width:100%;box-shadow:7px 5px 4rem 1rem #0000001a}.btn-container[_ngcontent-%COMP%]{margin:4rem 0 1rem;padding:3rem;text-align:center}.summary-detail[_ngcontent-%COMP%]{font-size:2rem}.tour-summary[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{margin:1.5rem 0}.sub-heading[_ngcontent-%COMP%]{margin-bottom:1.2rem}p.date[_ngcontent-%COMP%]{padding-left:3.5rem;margin:1rem 0}.dates-container[_ngcontent-%COMP%]{position:relative}.dates-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;top:.5rem}"]}),t})();const j=function(t){return["/tours",t]};let K=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-review-item"]],inputs:{review:"review"},decls:24,vars:10,consts:[[1,"container"],[1,"details"],[1,"rating"],[1,"card__icon"],[0,"xlink","href","assets/img/icons.svg#icon-map"],[0,"xlink","href","assets/img/icons.svg#icon-star"],[1,"date"],[0,"xlink","href","assets/img/icons.svg#icon-calendar"],[1,"content"],[1,"btn-container"],[1,"btn","btn--small","btn--green",3,"routerLink"]],template:function(t,n){1&t&&(s.TgZ(0,"section",0),s.TgZ(1,"article",1),s.TgZ(2,"div",2),s.O4$(),s.TgZ(3,"svg",3),s._UZ(4,"use",4),s.qZA(),s.kcU(),s.TgZ(5,"span"),s._uU(6),s.qZA(),s.qZA(),s.TgZ(7,"div",2),s.O4$(),s.TgZ(8,"svg",3),s._UZ(9,"use",5),s.qZA(),s.kcU(),s.TgZ(10,"span"),s._uU(11),s.qZA(),s.qZA(),s.TgZ(12,"div",6),s.O4$(),s.TgZ(13,"svg",3),s._UZ(14,"use",7),s.qZA(),s.kcU(),s.TgZ(15,"span"),s._uU(16),s.ALo(17,"date"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(18,"article",8),s.TgZ(19,"p"),s._uU(20),s.qZA(),s.qZA(),s.TgZ(21,"article",9),s.TgZ(22,"a",10),s._uU(23,"View Tour"),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(6),s.hij("",n.review.tour.name," Tour"),s.xp6(5),s.hij("Rating: ",n.review.rating,"/5"),s.xp6(5),s.Oqu(s.xi3(17,5,n.review.createdAt,"medium")),s.xp6(4),s.Oqu(n.review.review),s.xp6(2),s.Q6J("routerLink",s.VKq(8,j,n.review.tour.slug)))},directives:[r.yS],pipes:[o.uU],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-items:center;margin-top:15px;margin-bottom:15px;padding-top:5px;padding-bottom:5px;border-bottom:1px solid #c9c9c9}.card__icon[_ngcontent-%COMP%]{height:2rem;width:2rem;fill:#55c57a}.date[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .rating[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:5px}.date[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .rating[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.3rem}.date[_ngcontent-%COMP%], .rating[_ngcontent-%COMP%]{font-size:1.2rem;display:flex;align-items:center;margin-top:10px;margin-bottom:10px}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.3rem;max-width:25rem}.btn--green[_ngcontent-%COMP%]{color:#fff}.btn--green[_ngcontent-%COMP%], .btn--green[_ngcontent-%COMP%]:after{background-color:#55c57a}.btn-text[_ngcontent-%COMP%]:link, .btn-text[_ngcontent-%COMP%]:visited{color:#55c57a;display:inline-block;text-decoration:none;border-bottom:1px solid #55c57a;padding:3px;transition:all .2s}.btn-text[_ngcontent-%COMP%]:hover{background-color:#55c57a;color:#fff;box-shadow:0 1rem 2rem #00000026;transform:translateY(-2px)}.btn-text[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 .5rem 1rem #00000026}.btn-text[_ngcontent-%COMP%]:focus{outline:none;outline:3px solid #55c57a;outline-offset:3px}.btn[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:link, .btn[_ngcontent-%COMP%]:visited{font-size:1.6rem;padding:1rem 3rem;border-radius:10rem;text-transform:uppercase;display:inline-block;text-decoration:none;position:relative;transition:all .4s;font-weight:400;-webkit-backface-visibility:hidden;backface-visibility:hidden;border:none;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 1rem 2rem #00000026}.btn[_ngcontent-%COMP%]:active{transform:translateY(-1px);box-shadow:0 .5rem 1rem #00000026}.btn[_ngcontent-%COMP%]:focus{outline:none;background-color:#2e864b}"]}),t})();function G(t,n){1&t&&s._UZ(0,"app-spinner",5)}function X(t,n){if(1&t&&(s.ynx(0),s.YNc(1,G,1,0,"app-spinner",4),s.BQk()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("ngIf",t.loading)}}function V(t,n){1&t&&s._UZ(0,"app-review-item",7),2&t&&s.Q6J("review",n.$implicit)}function H(t,n){if(1&t&&(s.ynx(0),s.YNc(1,V,1,1,"app-review-item",6),s.BQk()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("ngForOf",t.reviews)}}function W(t,n){1&t&&(s.ynx(0),s.TgZ(1,"p",8),s._uU(2,"You have no reviews yet..."),s.qZA(),s.BQk())}const tt=[{path:"",component:f,canActivate:[k.a],data:{isAuthenticationRequired:!0},children:[{path:"",component:M},{path:"bookings",component:S},{path:"bookings/:id",component:$},{path:"reviews",component:(()=>{class t{constructor(t){this.store=t,this.reviews=[],this.loading=!1}ngOnInit(){this.storeSubscription=this.store.select(t=>t.users).subscribe(t=>{this.reviews=t.userReviews,this.loading=t.loading}),this.store.dispatch(i.rn.fetchUserReviews())}ngOnDestroy(){this.storeSubscription&&this.storeSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(s.Y36(a.yh))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-user-reviews-page"]],decls:7,vars:3,consts:[[1,"user-view__content"],[1,"user-view__form-container"],[1,"heading-secondary","ma-bt-md"],[4,"ngIf"],["class","spinner",4,"ngIf"],[1,"spinner"],[3,"review",4,"ngFor","ngForOf"],[3,"review"],[1,"no-reviews"]],template:function(t,n){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"h2",2),s._uU(3,"My reviews"),s.qZA(),s.YNc(4,X,2,1,"ng-container",3),s.YNc(5,H,2,1,"ng-container",3),s.YNc(6,W,3,0,"ng-container",3),s.qZA(),s.qZA()),2&t&&(s.xp6(4),s.Q6J("ngIf",n.loading),s.xp6(1),s.Q6J("ngIf",!n.loading),s.xp6(1),s.Q6J("ngIf",!n.loading&&0===n.reviews.length))},directives:[o.O5,h.O,o.sg,K],styles:["[_nghost-%COMP%]{flex:1}.user-view__content[_ngcontent-%COMP%]{position:relative;flex:1;padding:7rem 0}.user-view__form-container[_ngcontent-%COMP%]{position:relative;max-width:68rem;margin:0 auto;padding:0}.heading-secondary[_ngcontent-%COMP%]{font-size:2.25rem;text-transform:uppercase;font-weight:700;background-image:linear-gradient(90deg,#7dd56f,#28b487);-webkit-background-clip:text;color:#0000;letter-spacing:.2rem;line-height:1.3;display:inline-block}.ma-bt-md[_ngcontent-%COMP%]{margin-bottom:3rem!important}.spinner[_ngcontent-%COMP%]{position:absolute;width:100%;left:0;top:85px;z-index:99}p.no-reviews[_ngcontent-%COMP%]{font-size:2rem}"]}),t})()},{path:"billing",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-user-billing-page"]],decls:6,vars:0,consts:[[1,"user-view__content"],[1,"user-view__form-container"],[1,"heading-secondary","ma-bt-md"],[1,"no-billing"]],template:function(t,n){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"h2",2),s._uU(3,"Billing"),s.qZA(),s.TgZ(4,"p",3),s._uU(5,"No billing information is available at the moment."),s.qZA(),s.qZA(),s.qZA())},styles:["[_nghost-%COMP%]{flex:1}.user-view__content[_ngcontent-%COMP%]{position:relative;flex:1;padding:7rem 0}.user-view__form-container[_ngcontent-%COMP%]{position:relative;max-width:68rem;margin:0 auto;padding:0}.heading-secondary[_ngcontent-%COMP%]{font-size:2.25rem;text-transform:uppercase;font-weight:700;background-image:linear-gradient(90deg,#7dd56f,#28b487);-webkit-background-clip:text;color:#0000;letter-spacing:.2rem;line-height:1.3;display:inline-block}.ma-bt-md[_ngcontent-%COMP%]{margin-bottom:3rem!important}p.no-billing[_ngcontent-%COMP%]{font-size:2rem}"]}),t})()}]}];let nt=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[r.Bz.forChild(tt)],r.Bz]}),t})();var et=e(1601),ot=e(3190),rt=e(8002),it=e(5304),st=e(5792),at=e(5917),ct=e(7749),gt=e(1841);let lt=(()=>{class t{constructor(t){this.http=t,this.host=_.N.restApiHost,this.updateUser=_.N.updateUserInfoUrl,this.updatePassword=_.N.updateUserPasswordUrl,this.allBookings=_.N.allBookingsUrl,this.allCompletedAndPaidBookings=_.N.allCompleteAndPaidBookingsUrl,this.currentUserReviews=_.N.currentUserReviewsUrl}getAllBookings(){return this.http.get(this.host+this.allBookings)}getAllCompleteAndPaidBookings(){return this.http.get(this.host+this.allCompletedAndPaidBookings)}getBookingDetails(t){return this.http.get(this.host+this.allBookings+t)}updateCurrentUserInfo(t,n,e){const o=new FormData;return o.append("name",t),o.append("email",n),e&&o.append("photo",e),this.http.patch(this.host+this.updateUser,o)}updateCurrentUserPassword(t,n,e){const o={passwordCurrent:t,password:n,passwordConfirm:e};return console.log(o),this.http.patch(this.host+this.updatePassword,o)}getCurrentUserReviews(){return this.http.get(this.host+this.currentUserReviews)}}return t.\u0275fac=function(n){return new(n||t)(s.LFG(gt.eN))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),pt=(()=>{class t{constructor(t,n){this.actions$=t,this.usersService=n,this.updateCurrentUserInfo$=(0,et.GW)(()=>this.actions$.pipe((0,et.l4)(i.EJ.updateCurrentUserInfo),(0,ot.w)(t=>this.usersService.updateCurrentUserInfo(t.name,t.email,t.photo).pipe((0,rt.U)(t=>t.data.user),(0,rt.U)(t=>i.AR.updateUserInfoSuccess({user:t})),(0,it.K)(t=>{const n=this.mapErrorMessage(t);return(0,at.of)(i.AR.updateUserInfoFailure({error:n}))}))))),this.updateCurrentUserPassword$=(0,et.GW)(()=>this.actions$.pipe((0,et.l4)(i.EJ.updateCurrentUserPassword),(0,ot.w)(t=>this.usersService.updateCurrentUserPassword(t.currentPassword,t.newPassword,t.passwordConfirm).pipe((0,ot.w)(t=>(0,at.of)(i.AR.updateCurrentUserPasswordSuccess(),ct.Ti.authSuccess({authResponse:t,redirect:!1}))),(0,it.K)(t=>{const n=this.mapErrorMessage(t);return(0,at.of)(i.AR.updateCurrentUserPasswordFailure({error:n}))}))))),this.getBookingDetails$=(0,et.GW)(()=>this.actions$.pipe((0,et.l4)(i.mq.fetchBookingDetails),(0,ot.w)(t=>this.usersService.getBookingDetails(t.bookingId).pipe((0,rt.U)(t=>t.data.data),(0,rt.U)(t=>i.AR.fetchBookingDetailsSuccess({bookingDetails:t})),(0,it.K)(t=>{const n=this.mapErrorMessage(t);return(0,at.of)(i.AR.fetchBookingDetailsFailure({error:n}))}))))),this.getAllUserBookings$=(0,et.GW)(()=>this.actions$.pipe((0,et.l4)(i.mq.fetchUserBookings),(0,ot.w)(()=>this.usersService.getAllCompleteAndPaidBookings().pipe((0,rt.U)(t=>t.data.data),(0,rt.U)(t=>i.AR.fetchBookingsSuccess({bookings:t})),(0,it.K)(t=>{const n=this.mapErrorMessage(t);return(0,at.of)(i.AR.fetchBookingsFailure({error:n}))}))))),this.getCurrentUserReviews$=(0,et.GW)(()=>this.actions$.pipe((0,et.l4)(i.rn.fetchUserReviews),(0,ot.w)(()=>this.usersService.getCurrentUserReviews().pipe((0,rt.U)(t=>t.data.data),(0,rt.U)(t=>i.AR.fetchUserReviewsSuccess({userReviews:t})),(0,it.K)(t=>{const n=this.mapErrorMessage(t);return(0,at.of)(i.AR.fetchUserReviewsFailure({error:n}))}))))),this.onAlertDisplayed$=(0,et.GW)(()=>this.actions$.pipe((0,et.l4)(i.EJ.notificationDisplayed),(0,st.g)(4e3),(0,rt.U)(()=>i.EJ.clearNotification())))}mapErrorMessage(t){let n="Something went wrong. Please try again later";return"Unknown Error"!==t.statusText&&(n=t.error.message),n}}return t.\u0275fac=function(n){return new(n||t)(s.LFG(et.eX),s.LFG(lt))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();var dt=e(4466);let ut=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[o.ez,nt,et.sQ.forFeature([pt]),dt.m,b.UX]]}),t})()}}]);